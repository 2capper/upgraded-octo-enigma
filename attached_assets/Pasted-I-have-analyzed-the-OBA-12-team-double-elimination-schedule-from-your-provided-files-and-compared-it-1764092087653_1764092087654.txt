I have analyzed the OBA 12-team double elimination schedule from your provided files and compared it to the standard bracket logic. You are correct: the OBA format is significantly different from the standard power-of-2 bracket currently in the system.

Here is the plan to add the OBA-specific 12-team bracket while keeping the standard one available:

Define the New Template: I will create BRACKET_12_TEAM_DOUBLE_ELIM_OBA in shared/bracketTemplates.ts. This template maps exactly to the 23-game structure from your spreadsheet, including the specific bye logic in Round 3.

Register the Template: I will add it to the BRACKET_TEMPLATES map with a new key: double_elim_12_oba.

Expose the Format: I will add a new option to doubleElimFormats in shared/playoffFormats.ts so you can select "12-Team Double Elimination (OBA)" in the dropdown.

1. Update shared/bracketTemplates.ts
Add the new bracket definition and register it.

TypeScript

// ... existing imports and templates ...

export const BRACKET_12_TEAM_DOUBLE_ELIM_OBA: BracketTemplate = {
  name: '12-Team Double Elimination (OBA)',
  teamCount: 12,
  eliminationType: 'double',
  matchups: [
    // Round 1 - 6 Games (Everyone plays)
    { round: 1, gameNumber: 1, bracket: 'winners', team1Seed: 1, team2Seed: 12 },
    { round: 1, gameNumber: 2, bracket: 'winners', team1Seed: 2, team2Seed: 11 },
    { round: 1, gameNumber: 3, bracket: 'winners', team1Seed: 3, team2Seed: 10 },
    { round: 1, gameNumber: 4, bracket: 'winners', team1Seed: 4, team2Seed: 9 },
    { round: 1, gameNumber: 5, bracket: 'winners', team1Seed: 5, team2Seed: 8 },
    { round: 1, gameNumber: 6, bracket: 'winners', team1Seed: 6, team2Seed: 7 },

    // Round 2 - Losers (3 Games)
    { round: 2, gameNumber: 7, bracket: 'losers', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 1, position: 'loser' }, team2Source: { gameNumber: 2, position: 'loser' } },
    { round: 2, gameNumber: 8, bracket: 'losers', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 3, position: 'loser' }, team2Source: { gameNumber: 4, position: 'loser' } },
    { round: 2, gameNumber: 9, bracket: 'losers', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 5, position: 'loser' }, team2Source: { gameNumber: 6, position: 'loser' } },

    // Round 2 - Winners (3 Games)
    { round: 2, gameNumber: 10, bracket: 'winners', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 1, position: 'winner' }, team2Source: { gameNumber: 2, position: 'winner' } },
    { round: 2, gameNumber: 11, bracket: 'winners', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 3, position: 'winner' }, team2Source: { gameNumber: 4, position: 'winner' } },
    { round: 2, gameNumber: 12, bracket: 'winners', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 5, position: 'winner' }, team2Source: { gameNumber: 6, position: 'winner' } },

    // Round 3 - Losers (3 Games)
    { round: 3, gameNumber: 13, bracket: 'losers', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 7, position: 'winner' }, team2Source: { gameNumber: 8, position: 'winner' } },
    { round: 3, gameNumber: 14, bracket: 'losers', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 9, position: 'winner' }, team2Source: { gameNumber: 10, position: 'loser' } },
    { round: 3, gameNumber: 15, bracket: 'losers', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 11, position: 'loser' }, team2Source: { gameNumber: 12, position: 'loser' } },

    // Round 3 - Winners (1 Game - Winner of G10 gets a Bye)
    { round: 3, gameNumber: 16, bracket: 'winners', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 11, position: 'winner' }, team2Source: { gameNumber: 12, position: 'winner' } },

    // Round 4 - Losers (2 Games)
    { round: 4, gameNumber: 17, bracket: 'losers', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 13, position: 'winner' }, team2Source: { gameNumber: 14, position: 'winner' } },
    { round: 4, gameNumber: 18, bracket: 'losers', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 15, position: 'winner' }, team2Source: { gameNumber: 16, position: 'loser' } },

    // Round 4 - Winners (1 Game - Undefeated vs Undefeated)
    { round: 4, gameNumber: 19, bracket: 'winners', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 16, position: 'winner' }, team2Source: { gameNumber: 10, position: 'winner' } },

    // Round 5 - Losers (1 Game)
    { round: 5, gameNumber: 20, bracket: 'losers', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 17, position: 'winner' }, team2Source: { gameNumber: 18, position: 'winner' } },

    // Round 5 - Semi-Final (1 Game)
    { round: 5, gameNumber: 21, bracket: 'championship', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 19, position: 'winner' }, team2Source: { gameNumber: 19, position: 'loser' } }, 
    // Note: This template assumes the bracket merges here. OBA rules allow for a draw if 3 teams remain, but this path (Undefeated plays Loser of Finals) is the standard interpretation for a static template.

    // Championship
    { round: 6, gameNumber: 22, bracket: 'championship', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 21, position: 'winner' }, team2Source: { gameNumber: 20, position: 'winner' } },
    { round: 6, gameNumber: 23, bracket: 'championship', team1Seed: null, team2Seed: null, team1Source: { gameNumber: 22, position: 'loser' }, team2Source: { gameNumber: 22, position: 'winner' } }, // If necessary
  ]
};

// ... existing BRACKET_TEMPLATES ...
export const BRACKET_TEMPLATES: Record<string, BracketTemplate> = {
  // ... existing templates ...
  'double_elim_12_oba': BRACKET_12_TEAM_DOUBLE_ELIM_OBA, // Add this line
};
2. Update shared/playoffFormats.ts
Add the new format option so it appears in the UI.

TypeScript

// ... existing formats ...

// Double Elimination Formats
export const doubleElimFormats: PlayoffFormatOption[] = [
  // ... existing formats ...
  {
    value: 'double_elim_12',
    label: '12-Team Double Elimination (Standard)',
    description: 'Complex double elimination bracket',
    minTeams: 12,
    numberOfPlayoffTeams: 12,
  },
  // Add this new option:
  {
    value: 'double_elim_12_oba', // This matches the key in bracketTemplates
    label: '12-Team Double Elimination (OBA)',
    description: 'Official OBA 12-team format (All teams play Rd 1)',
    minTeams: 12,
    numberOfPlayoffTeams: 12,
  },
];

// Update the PlayoffFormat type definition at the top of the file to include 'double_elim_12_oba'
export type PlayoffFormat = 
  // ...
  | 'double_elim_12'
  | 'double_elim_12_oba' // Add this
  | 'double_elim_16';
This implementation preserves your existing logic while giving you the specific, compliant OBA format you need for 12-team tournaments.